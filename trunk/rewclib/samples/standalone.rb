require 'rubygems'require 'opengl'require 'glut'dir = File.dirname(__FILE__)require dir + '/../rewclib'WIDTH = 640HEIGHT = 480FPS = 30$cam = Rewclib.newunless $cam.open(false, WIDTH, HEIGHT, FPS)  puts 'No camera'  exit(0)enddisplay = proc {  glClear(GL_COLOR_BUFFER_BIT)  GL.Begin(GL::TRIANGLES)  GL.Color3f(1.0, 0.0, 0.0)  # red  GL.Vertex3f(0.0, 0.0, 0.0) # center  GL.Color3f(0.0, 1.0, 0.0)  # green  GL.Vertex3f(1.0, 0.0, 0.0) # right  GL.Color3f(0.0, 0.0, 1.0)  # blue  GL.Vertex3f(0.0, 1.0, 0.0) # up  GL.End();  glReadBuffer(GL_BACK)  glPixelStorei(GL_UNPACK_ALIGNMENT, 1)  foreground = glReadPixels(0, 0, WIDTH, HEIGHT, GL_RGB, GL_UNSIGNED_BYTE)  blended = $cam.blend(foreground)  glDrawPixels(WIDTH, HEIGHT, GL_RGB, GL_UNSIGNED_BYTE, blended)  glutSwapBuffers}idle = proc {  glutPostRedisplay}glutInitglutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_ALPHA | GLUT_DEPTH)glutInitWindowSize(WIDTH, HEIGHT)glutCreateWindow('Webcam')glutDisplayFunc(display)glutIdleFunc(idle)glClearColor(0.5, 0.5, 0.5, 0.0)glutMainLoop$cam.close